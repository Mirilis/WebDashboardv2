
@{
    ViewData["Title"] = "Process Cards";

}
@{ 
    List<WebDashboardv2.Model.MinProcessCard> ProcessCards = (List<WebDashboardv2.Model.MinProcessCard>)ViewData["ProcessCards"];
    string ProcessCardClass = (string)ViewData["CardClass"];
    string CanEdit = ViewData["UserAccess"].ToString().ToLower(); 
}
<head>
    <style>
        .update-label{
            display:none;
        }
    </style>
</head>

                    <div class="row">
                        <div class="col-lg-12">
                            <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <h5>@ProcessCardClass Process Cards</h5>
                                </div>
                                <div class="ibox-content">
                                    <input type="text" class="form-control input-sm m-b-xs" id="filter"
                                           placeholder="Search Process Cards">

                                    <table class="footable table toggle-circle table-stripped" data-filter-min="0" data-page-size="25" data-filter=#filter>
                                        <thead>
                                            <tr>
                                                <th width="125">Product</th>
                                                <th width="125" >Department</th>
                                                <th width="50">PDF</th>
                                                <th width="50" >Quality Alerts</th>
                                                <th width="50" >Quality Concerns</th>
                                                @if (bool.Parse(CanEdit))
                                                {
                                                <th width="50" align="center">EDIT</th>
                                                <th data-hide="all">Details</th>
                                               }
                                              
                                            </tr>
                                        </thead>
                                        <tbody>
@foreach (var card in ProcessCards)
{
                                            <tr class="gradeX" id="@card.ID-main">
                                                <td>@card.ProductName</td>
                                                <td >@card.ProcessCardType</td>
                                                <td ><a href='@string.Format("http://ncwebtest:8001/api/pdf/{0}", @card.ID)' ><i class="fa fa-file-pdf-o"/></a></td>
                                                <td ><a asp-controller="QualityAlerts", asp-action="Index" asp-route-product="@card.ProductName"><i class="fa fa-exclamation-circle" /></a></td>
                                                <td ><a asp-controller="QualityConcerns" , asp-action="Index" asp-route-id="@card.ID"><i class="fa fa-question-circle" /></a></td>
                                                @if (bool.Parse(CanEdit))
                                                {
		                                            <td ><a id="@card.ID-edit" asp-controller="ProcessCards" asp-action="Edit" asp-route-id="@card.ID" class="edit-button"><i class="fa fa-edit"/></a></td>
                                                }
                                                <td>
                                                <div id="@card.ID-details">
                                                   </div>@Html.Partial("_EditDetails") </td>
                                            </tr>
}
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="5">
                                                    <ul class="pagination pull-right"></ul>
                                                </td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                








    
@section Styles {
    <environment names="Development">
        <link rel="stylesheet" href="~/lib/footable/css/footable.core.css" />
    </environment>
    <environment names="Staging,Production">
        <link rel="stylesheet" href="~/lib/footable/css/footable.core.min.css" />
    </environment>
}

@section Scripts {
    <environment names="Development,Staging,Production">
        <script src="~/lib/footable/dist/footable.all.min.js"></script>
    </environment>

    <script type="text/javascript">
        $(document).ready(function () {

            $('.footable').footable();
        });
    </script>


                <script type="text/javascript">
                    $(document).ready(function () {

                        // Add slimscroll to element
                        $('.scroll_content').slimscroll({
                            height: '25px'
                        })
                        $('input[name="lockedTxt"]').attr("readonly", !@CanEdit);
                        $('.edit-button').click( function (evt) {
                            evt.preventDefault();
                            evt.stopPropagation();
                            var a = $(this).attr("id").replace("edit", "details");
                            url = $(this).attr('href');
                            $("div[id='" + a + "']").load(url, function () { 
                                var a = $(this).attr("id").replace("details", "main");
                                $("tr[id='" + a + "']").trigger('footable_toggle_row');
                            });
                            

                            
                            
                        });
                    });


                </script>
            }


